{
  "project": "Ralph Loop v2 (Continuation)",
  "goal": "Take the already-built multiplayer systems and turn Ralph Loop into a fun, polished, Factorio-like playable experience without unnecessary rewrites.",
  "definition_of_done": [
    "Existing systems are stabilized and visible in gameplay (especially enemies/combat/building)",
    "Core loop is fun: gather -> craft -> fight -> place",
    "UI is clean, minimal, retro, and supports moment-to-moment play",
    "Buildings are craftable/placeable/replicated (automation behavior still deferred)",
    "Two-player room sessions are reliable without lifecycle regressions"
  ],
  "quality_bar": [
    "Build on existing systems first; avoid greenfield rewrites",
    "No spaghetti abstractions",
    "Server-authoritative outcomes for economy/combat/build rules",
    "Deterministic/reproducible world behavior where practical",
    "All changes validated with compile/test/build feedback loops"
  ],
  "items": [
    {
      "id": "RLP2-000",
      "category": "harness",
      "description": "Reframe Ralph loop from reset to continuation: preserve implemented systems and prioritize stabilization + fun.",
      "steps": [
        "PRD explicitly states continuation strategy",
        "Prompt explicitly discourages unnecessary rewrites",
        "Progress baseline reflects continuity from archived and current state"
      ],
      "passes": true
    },
    {
      "id": "RLP2-101",
      "category": "critical-bug",
      "description": "Fix enemy visibility in the client so server-spawned enemies are rendered and actionable.",
      "steps": [
        "Combat snapshot data reaches Bevy render payload",
        "Enemies visibly render in-world",
        "Player attacks can target visible enemies"
      ],
      "passes": true
    },
    {
      "id": "RLP2-102",
      "category": "critical-bug",
      "description": "Fix building placement regressions so crafted buildings can be placed consistently.",
      "steps": [
        "Placement command succeeds when inventory/collision rules pass",
        "Placed building appears for all clients",
        "Placement failures provide clear reason in UI/log"
      ],
      "passes": true
    },
    {
      "id": "RLP2-103",
      "category": "critical-bug",
      "description": "Fix gameplay blockers where collected resources feel unusable by ensuring inventory->craft->build path works end-to-end.",
      "steps": [
        "Collected resources show in inventory reliably",
        "Crafting consumes resources and yields outputs",
        "Craft outputs are usable for placement/combat progression"
      ],
      "passes": true
    },
    {
      "id": "RLP2-104",
      "category": "ui",
      "description": "Redesign UI to clean/minimal/retro and gameplay-first across connect and room screens.",
      "steps": [
        "HUD clutter reduced and hierarchy improved",
        "Inventory/crafting/build/combat information remains accessible",
        "Desktop + mobile layouts remain usable"
      ],
      "passes": false
    },
    {
      "id": "RLP2-105",
      "category": "fun-tuning",
      "description": "Tune economy and pacing to make the loop fun in a 10-20 minute co-op session.",
      "steps": [
        "Time-to-first-building and first meaningful combat feel reasonable",
        "Recipe costs and drop/mining yields avoid dead ends",
        "Player progression has clear short-term goals"
      ],
      "passes": false
    },
    {
      "id": "RLP2-106",
      "category": "combat",
      "description": "Improve combat readability and responsiveness (feedback, hit clarity, event UX).",
      "steps": [
        "Hits/damage/deaths are clearly communicated",
        "Combat feed and in-world cues align with authoritative outcomes",
        "No severe desync between local expectation and server result"
      ],
      "passes": false
    },
    {
      "id": "RLP2-107",
      "category": "art",
      "description": "Use Retro Diffusion to fill missing visual assets for enemies/resources/buildings and unify style.",
      "steps": [
        "Enemy/resource/building visuals are present and coherent",
        "Asset ids and metadata are stable",
        "Regeneration instructions are documented"
      ],
      "passes": false
    },
    {
      "id": "RLP2-108",
      "category": "networking",
      "description": "Stabilize room lifecycle and reconnect behavior for sustained co-op play.",
      "steps": [
        "Room deep-link navigation works",
        "Room switching/rejoin works without hard refresh",
        "Input/combat/build controls remain functional after reconnect"
      ],
      "passes": false
    },
    {
      "id": "RLP2-109",
      "category": "quality",
      "description": "Add targeted tests/smoke checks for the stabilized gameplay path.",
      "steps": [
        "Covers enemy render/snapshot plumbing regressions",
        "Covers inventory/crafting/building critical path",
        "Pre-merge check command remains green"
      ],
      "passes": false
    },
    {
      "id": "RLP2-110",
      "category": "release",
      "description": "Ship the fun, stable vertical slice to will.ralph-island.com with a smoke test checklist.",
      "steps": [
        "Deploy succeeds",
        "Two-player smoke test passes on production domain",
        "Known limitations documented"
      ],
      "passes": false
    }
  ]
}
